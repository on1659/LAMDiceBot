========================================
π“‹ Summit Log - 2026-02-03 (2)
========================================

## λ³€κ²½ νμΌ
- config/horse/race.json: νΈλ™ κ±°λ¦¬ 300/500/700 β†’ 500/700/1000 λ³€κ²½
- socket/horse.js: κΈ°λ³Έ νΈλ™ shortβ†’medium, trackPresets μ •λ³΄λ¥Ό ν΄λΌμ΄μ–ΈνΈμ— μ „μ†΅
- horse-race-multiplayer.html: ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ μ†λ„ λ™κΈ°ν™” κ°μ„ , νΈλ™ κ±°λ¦¬ UI λ™μ  μƒμ„±

## μƒμ„Έ λ³€κ²½ λ‚΄μ—­

### νΈλ™ κ±°λ¦¬ λ³€κ²½
- race.json: short 500m, medium 700m, long 1000m
- μ„λ²„/ν΄λΌμ΄μ–ΈνΈ κΈ°λ³Έκ°’ 'short' β†’ 'medium' (500m κΈ°λ³Έ)
- ν΄λΌμ΄μ–ΈνΈ ν•λ“μ½”λ”©λ fallback 300 β†’ 500μΌλ΅ λ³€κ²½ (4κ³³)

### νΈλ™ κ±°λ¦¬ UI config μ—°λ™
- μ„λ²„κ°€ TRACK_PRESETSμ meters κ°’μ„ horseSelectionReady, trackLengthChanged μ΄λ²¤νΈμ— ν¬ν•¨
- ν΄λΌμ΄μ–ΈνΈ trackPresetsFromServer λ³€μλ΅ μμ‹ , λ²„νΌ ν…μ¤νΈ λ™μ  μƒμ„±
- configλ§ λ³€κ²½ν•λ©΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“ μμ • μ—†μ΄ κ±°λ¦¬ λ°μ

### λΉ„νΈμ¤νΈ νΈλ™ κ±°λ¦¬ ν‘μ‹ κ°μ„ 
- κΈ°μ΅΄: μ‘μ€ νμƒ‰ ν…μ¤νΈ "νΈλ™: 500m"
- λ³€κ²½: λ°°μ§€ μ¤νƒ€μΌ (π + νλ€μƒ‰ κ°•μ΅° + λ°°κ²½ κ·ΈλΌλ°μ΄μ…)

### ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ μ†λ„ λ™κΈ°ν™” κ°μ„ 
- λ―Έμ‚¬μ© pseudoRandom μ½”λ“ μ κ±° (9301/49297 μƒμ)
- state.simElapsed μ¶”κ°€: μ„λ²„μ™€ λ™μΌν• 16ms κ³ μ • μ¤ν…μΌλ΅ μ†λ„ λ³€λ™ interval κ³„μ‚°
- lerp λ³΄κ°„ ν”„λ μ„ λ…λ¦½ν™”: speedDiff * 0.05 β†’ speedDiff * (1 - 0.95^(deltaTime/16))

========================================

========================================
π“‹ Summit Log - 2026-02-03
========================================

## λ³€κ²½ νμΌ
- db/init.js: vehicle_stats ν…μ΄λΈ” CREATE TABLE μ¶”κ°€
- db/vehicle-stats.js (μ‹ κ·): νƒκ²ƒ ν†µκ³„ CRUD λ¨λ“ (DB + νμΌ fallback)
- socket/horse.js: κ²½κΈ° μΆ…λ£ μ‹ ν†µκ³„ μ €μ¥ νΈμ¶, horseSelectionReadyμ— μΈκΈ°λ§ λ°μ΄ν„° μ¶”κ°€
- horse-race-multiplayer.html: popularVehicles λ³€μ μ¶”κ°€, λ§ μ„ νƒ λ²„νΌμ— "μΈκΈ°" λ±ƒμ§€ ν‘μ‹
- config/horse/race.json: κΈ°λ―Ή μ„¤μ • μ΅°μ •
- update-log.txt: μ—…λ°μ΄νΈ λ‚΄μ—­ μ¶”κ°€

## μƒμ„Έ λ³€κ²½ λ‚΄μ—­

### [νƒκ²ƒ ν†µκ³„ DB μ €μ¥ μ‹μ¤ν…]
- vehicle_stats ν…μ΄λΈ”: server_id, vehicle_id, appearance_count, pick_count, rank_1~rank_6
- UPSERT λ°©μ‹μΌλ΅ κ²½κΈ°λ§λ‹¤ μ§‘κ³„ λ„μ 
- PostgreSQL μ‚¬μ© λ¶κ°€ μ‹ config/vehicle-stats.json νμΌ fallback
- db/menus.jsμ DB+νμΌ λ³‘ν–‰ ν¨ν„΄ μ°Έκ³ ν•μ—¬ λ™μΌ κµ¬μ΅° μ μ©

### [κ²½κΈ° μΆ…λ£ μ‹ μ €μ¥]
- socket/horse.js 2κ° μ½”λ“ κ²½λ΅μ— recordVehicleRaceResult() νΈμ¶ μ¶”κ°€
  - λ©”μΈ κ²½μ£Ό κ²½λ΅ (νƒ€μ΄λ¨Έ κΈ°λ° κ²°κ³Ό μ²λ¦¬)
  - μλ™ μ¤€λΉ„ κ²½μ£Ό κ²½λ΅ (allSelected κΈ°λ°)
- rankings, selectedVehicleTypes, userHorseBets λ°μ΄ν„°λ΅ κ° νƒκ²ƒμ λ“±μ¥/μμ„/μ„ νƒ μ§‘κ³„

### [μΈκΈ°λ§ ν‘μ‹]
- horseSelectionReady μ΄λ²¤νΈ 3κ³³μ— popularVehicles λ°°μ—΄ μ¶”κ°€ μ „μ†΅
- getPopularVehicles(): pick_rate(μ„ νƒλ¥ ) μƒμ„ 2κ°, μµμ† λ“±μ¥ 5ν μ΄μƒ μ΅°κ±΄
- ν΄λΌμ΄μ–ΈνΈ: λ§ μ„ νƒ λ²„νΌμ— μ£Όν™©μƒ‰ "μΈκΈ°" λ±ƒμ§€ ν‘μ‹

### [BGM λ³€κ²½]
- assets/sounds/horse-race/back_bgm.mp3 μ‚­μ 
- assets/sounds/horse-race/bgm.mp3 λ³€κ²½

========================================
