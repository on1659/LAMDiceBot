# LAMDiceBot 팀 회의록 (Single)

**일시**: 2026-02-18
**주제**: 컨트롤바 통일 v3 — 전수 분석 및 근본 수정
**참석자 (관점)**:
- 기획팀: 기획 팀장, 기획 사원
- 개발팀: 개발 팀장, 개발 사원
- 디자인팀: UI/UX 디자이너, 사운드 디자이너
- 품질팀: QA 엔지니어
**회의 방식**: 1인 순차 분석 (경량 버전)
**게임 대상**: 주사위 / 룰렛 / 경마 (크레인 제외 — 삭제 예정)

---

## 1. 현황 요약

`control-bar-shared.js`로 컨트롤바를 모듈화했으나(v2), 각 게임 HTML의 레거시 코드 차이로 게임마다 렌더링이 다르게 나옴. 하나씩 고치면 계속 새로운 차이가 발견되어 전수 분석 후 한 번에 맞추기로 결정.

**사용자 보고 이슈**:
1. 닉네임이 안 보임 (룰렛/경마)
2. 준비 버튼이 없음 (룰렛/경마)
3. 나가기 버튼이 라인을 꽉 채움 (작아야 함)
4. 게임마다 렌더링이 다름

**전수 분석 결과 — 근본 원인 5가지**:
1. `window.myUserName`이 코드베이스 어디에서도 설정된 적 없음 → 닉네임 미표시
2. 룰렛/경마 HTML에 `readyButton` 요소 자체가 없음 → 준비 버튼 미표시
3. 경마 볼륨이 `js/horse-race.js`에서 독립 운영 → ControlBar 슬라이더와 미연결
4. `#leaveBtn`에 `width: auto` 미지정 → 플렉스 컬럼에서 풀 너비 확장
5. `updateControlBarUI()`에 `readyBtn` 데드 코드 잔존 (존재하지 않는 ID 참조)

---

## 2. 관점별 분석 결과

### 기획팀

#### 2-1. 기획 팀장 (A1)
- **통일성 우선**: 3개 게임의 컨트롤바가 동일하게 보여야 사용자 혼란 방지. v2에서 모듈화는 성공했으나 레거시 차이 제거가 미완성.
- **크레인 제외 합리적**: 삭제 예정인 게임에 공수 투입 불필요. 주사위/룰렛/경마 3개에 집중.
- **준비 버튼 누락은 치명적**: 준비 기능이 없으면 게임 시작 플로우가 깨짐. 최우선 수정 대상.

#### 2-2. 기획 사원 (A2)
- **닉네임 미표시**: 유저 입장에서 "내가 누군지" 확인할 수 없는 건 기본 UX 결함. `currentUser` 변수가 이미 존재하므로 간단히 해결 가능.
- **준비 버튼**: 주사위에만 있고 룰렛/경마에 없으면 "룰렛/경마는 어떻게 준비하지?" 혼란. 동일 패턴 적용 필수.

### 개발팀

#### 2-3. 개발 팀장 (B1)
- **근본 원인 파악 완료**: `window.myUserName` 미설정, `readyButton` HTML 누락, 경마 독립 볼륨 — 모두 명확한 원인. 추측이 아닌 코드 확인 기반.
- **수정 범위 최소화**: `control-bar-shared.js`는 변경 불필요. 각 게임 HTML의 레거시 코드만 수정하면 됨.
- **경마 볼륨 위임**: `js/horse-race.js`에서 70줄 정도의 독립 볼륨 코드를 ControlBar 위임으로 교체. 다른 게임과 동일 패턴.

#### 2-4. 개발 사원 (B2)
- **영향 파일 4개**: `roulette-game-multiplayer.html`, `horse-race-multiplayer.html`, `js/horse-race.js`, `css/theme.css`
- **수정량 적음**: 각 HTML ~10줄 변경, horse-race.js ~70줄 제거(2줄 대체), theme.css 1줄 추가
- **구현 모델 추천**: Sonnet — 파일/위치/코드가 모두 구체적이며 단순 교체 작업

### 디자인팀

#### 2-5. UI/UX 디자이너 (C)
- **나가기 버튼**: `width: auto` 한 줄로 해결. 플렉스 컬럼 컨테이너에서 자식 요소가 기본적으로 stretch되는 CSS 특성.
- **준비 버튼 위치**: 주사위 패턴(readySection 타이틀 옆)을 그대로 따르면 시각적 일관성 확보.
- **컨트롤바 레이아웃**: 현재 3행 구조(제목+배지 / 닉네임+볼륨 / 나가기) 유지. 추가 변경 불필요.

#### 2-6. 사운드 디자이너 (D)
- **경마 볼륨 연결 필수**: 현재 ControlBar 슬라이더가 경마 사운드에 영향 안 줌. 유저가 볼륨 조절해도 반응 없는 상태.
- **기존 사운드 로직 보존**: `getHorseSoundEnabled()`/`getHorseMasterVolume()` 함수명은 유지하되 내부만 ControlBar 위임으로 변경. 호출하는 곳(40+ 곳) 수정 불필요.

### 품질팀

#### 2-7. QA 엔지니어 (E)
- **테스트 방법론**: 3개 게임 각각 방 입장 → 7개 항목 수동 확인 (닉네임, 호스트배지, 볼륨, 나가기, 준비버튼, 방제목편집, 컨트롤바 렌더링)
- **회귀 테스트**: 기존 기능(사운드 재생, 준비 드래그앤드롭, 호스트 위임) 동작 확인 필수

---

## 3. 테스트 전략 (QA 주도)

| 기능 | 테스트 방법 | 자동화 가능 | 검증 기준 |
|------|-------------|-------------|-----------|
| 닉네임 표시 | 방 입장 후 컨트롤바에 이름 표시 확인 | X | 3개 게임 모두 표시 |
| 준비 버튼 | 준비 버튼 클릭 → 텍스트 변경 확인 | O (e2e) | 준비/취소 토글 동작 |
| 볼륨 슬라이더 | 슬라이더 조작 → 사운드 볼륨 변경 확인 | X | 경마 포함 3개 게임 동작 |
| 나가기 버튼 | 버튼 너비가 컨텐츠 크기인지 확인 | X | 풀 너비 아님 |
| 호스트 배지 | 호스트만 배지 표시 확인 | X | 비호스트에게 미표시 |
| 방 제목 편집 | 주사위: ✏️ 클릭, 룰렛/경마: 제목 클릭 | X | 편집 모드 진입 |
| 컨트롤바 동일성 | 3개 게임 스크린샷 비교 | X | 레이아웃 동일 |

---

## 4. 합의 도출

| 우선순위 | 기능 | 판정 | 주요 지지 관점 | 근거 |
|---------|------|------|---------------|------|
| 1 | 닉네임 표시 수정 | 채택 | A2, B2, C | `window.myUserName` → `currentUser` 1줄 교체 |
| 2 | 준비 버튼 추가 | 채택 | A1, A2, B2 | 주사위 패턴 그대로 복사, 게임 플로우 필수 |
| 3 | 경마 볼륨 ControlBar 연결 | 채택 | D, B1 | 볼륨 슬라이더가 동작 안 하는 건 결함 |
| 4 | 나가기 버튼 크기 수정 | 채택 | C | CSS 1줄 추가 (`width: auto`) |
| 5 | 데드 코드 제거 | 채택 | B1, E | `readyBtn` 참조 — 존재하지 않는 ID |

### 관점 간 충돌 사항

없음. 모든 항목이 명확한 버그/누락이며 수정 방향에 이견 없음.

---

## 5. 다음 단계 (Action Items)

> 구현 상세: [`2026-02-18-control-bar-unification-v3-impl.md`](../impl/2026-02-18-control-bar-unification-v3-impl.md)

- [ ] 룰렛/경마 닉네임 표시 수정 (`window.myUserName` → `currentUser`)
- [ ] 룰렛/경마 준비 버튼 HTML 추가
- [ ] 경마 볼륨 시스템 ControlBar 위임
- [ ] 나가기 버튼 `width: auto` 추가
- [ ] 데드 코드 제거 (`readyBtn` 참조)
