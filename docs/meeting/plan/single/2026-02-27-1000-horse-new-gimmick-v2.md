# LAMDiceBot 팀 회의록 (Single)

**일시**: 2026-02-27 10:00
**주제**: 경마 새 기믹 발굴 — 완전 새로운 콘셉트 (v2)
**참석자 (관점)**:
- 피디: PD
- 기획팀: 기획 팀장 (A1), 기획 사원 (A2)
- 개발팀: 개발 팀장 (B1), 개발 사원 (B2)
- 디자인팀: UI/UX 디자이너 (C)
- 품질팀: QA 엔지니어 (E)
**회의 방식**: 1인 순차 분석 (경량 버전)
**게임 대상**: 경마
**절대 원칙**: 동기화 + 공정성
**배제 목록**: 날씨 투표, Fair Interaction Pool, 응원 파도, Sabotage Touch, Live Prediction, 러버밴딩, 조건부 기믹, 말 컨디션 플레이버, 배팅 시스템, 시즌 랭킹 (기존 두 회의에서 이미 다룬 내용 전부)

---

## 1. 현황 요약

현재 기믹 9종은 전부 **개별 말에 적용되는 단순 속도 조절** 계열:
- stop / obstacle / item_trap (정지계)
- slow / wobble (감속계)
- sprint / item_boost (가속계)
- slip / reverse+체인부스트 (역주행계)

비어 있는 영역:
1. **트랙 기반 이벤트** — 트랙 자체가 변화하는 기믹 없음
2. **전체 동시 이벤트** — 모든 말에 동시에 뭔가 발생하는 기믹 없음
3. **말 간 상호작용** — 말들 간 관계에 기반한 기믹 없음

---

## 2. 관점별 분석 결과

### PD

**제안 1: 트랙 이벤트 — 구간 함정/부스터 패드**
트랙의 특정 구간에 이벤트 존 배치. 해당 구간을 통과하는 모든 말에게 동일 적용. "말 기반" → "트랙 기반"으로 완전 새로운 차원. 공정성/동기화 완벽.

**제안 2: 도미노 연쇄 기믹**
앞 말이 obstacle에 걸렸을 때, 바로 뒤 말도 연쇄 영향. dodge(회피) 또는 crash(충돌) 분기. 말 간 관계 기반 기믹.

### 기획팀

#### 2-1. 기획 팀장 (A1)

**제안 1: 체력(HP) 누적 피로 시스템**
각 말에 체력 100 부여. 부스터 사용 시 체력 소모, 체력 낮아지면 속도 자연 하락, 0이면 강제 걷기. "무적 부스터 연속 발동" 방지 + 서사 생성. 공정성 OK (모든 말 동일 초기 체력). 구현 복잡도: 중간.

**제안 2: 위험 구간 공개 시스템**
경주 시작 전 트랙에 위험 구간 시각 표시 (진흙/빙판 등). 어느 말이든 통과하면 동일 감속 적용. 현재 없는 "구간별 긴장감" 제공.

#### 2-2. 기획 사원 (A2)

**제안 1: 유성우 — 전체 동시 기믹**
경주 중 특정 진행률에서 전체 이벤트 발동. 각 말에 대한 효과는 서버가 독립적으로 미리 계산. "같은 순간 모두에게 무언가 일어나는" 경험 → 극적인 공유 순간 연출.

**제안 2: 텔레포트 — 순위 셔플**
1등과 꼴등 위치 교환. 드라마틱하지만 배팅 게임에서 공정성 직결 문제 → QA에서 기각 권고.

### 개발팀

#### 2-3. 개발 팀장 (B1)

**제안 1: 트랙 존 시스템 설계**
```js
// horseRaceStarted에 포함할 새 구조
raceData.trackZones = [
  { startProgress: 0.2, endProgress: 0.3, type: 'mud', speedMultiplier: 0.7 },
  { startProgress: 0.6, endProgress: 0.7, type: 'boost_pad', speedMultiplier: 1.5 }
]
```
기존 기믹 구조와 완전 독립. 공정성 완벽 (모든 말 동일 구간 통과). 서버 사전 계산 구조 유지.

**제안 2: 체력 시스템 우려**
상태 관리 복잡도 증가 (시뮬레이션 루프에서 체력 추적 필요). 기존 `speedMultiplier` 누적으로 단순화 가능하나 별도 설계 필요.

#### 2-4. 개발 사원 (B2)

**제안 1: 트랙 존 구현 — 기존 구조 재활용**
클라이언트 애니메이션 루프에서 이미 말의 `progress`를 매 프레임 계산. 여기서 `trackZones` 체크 로직 추가만 하면 됨. 서버에서 `generateTrackZones()` 함수 1개 추가. 구현 비용: 중간.

**제안 2: 유성우 이벤트 구현**
`horseRaceStarted`에 `globalEvents: [{ progressTrigger: 0.5, type: 'meteor_shower', effects: [...] }]` 추가. 서버가 각 말의 효과를 미리 계산해서 포함. 구현 비용: 낮음 (기존 기믹 구조 거의 동일).

### 디자인팀

#### 2-5. UI/UX 디자이너 (C)

**제안 1: 트랙 존 시각화**
경주 전/중 트랙에 구간 표시 — 진흙: 갈색 텍스처, 빙판: 하늘색, 부스터 패드: 노란 화살표. "저 구간에 들어가면 어떻게 된다" 모두가 알 수 있는 긴장감.

**제안 2: 유성우 전체 이펙트**
이벤트 발동 시 화면 전체 별똥별 파티클 + 각 말마다 hit/miss 이펙트. 모든 플레이어가 동시에 보는 스펙터클.

### 품질팀

#### 2-6. QA 엔지니어 (E)

**트랙 존 테스트**: 탭 3개 동일 방 → 존이 동일 위치에 표시되는지 + 통과 시 모든 탭에서 동일한 속도 변화 확인.

**유성우 테스트**: 이벤트 발동 진행률에서 모든 탭의 이펙트/속도 변화 동일 여부 필수 체크. 각 말의 랜덤 효과가 모든 클라이언트에서 동일 재현되는지 핵심.

**텔레포트 기각 근거**: 이미 계산된 결과 재배치 → 순위 예측이 의미없어짐. 배팅 게임 공정성 직결 → 기각 권고.

---

## 3. 테스트 전략 (QA 주도)

| 기능 | 테스트 방법 | 검증 기준 |
|------|-------------|-----------|
| 트랙 존 — 동기화 | 탭 3개 동일 방, 경주 시작 | 모든 탭에서 존 위치/효과 100% 동일 |
| 트랙 존 — 공정성 | 동일 구간 통과 시 속도 로그 비교 | 모든 말 동일 speedMultiplier 적용 |
| 유성우 — 동기화 | 탭 3개에서 이벤트 발동 순간 확인 | 모든 탭 동일 hit/miss 결과 |
| 유성우 — 분포 | 1000회 시뮬레이션 → 효과 분포 확인 | 무효과 40% / 감속 30% / 부스터 20% / 정지 10% 근사 |

---

## 4. 합의 도출

| 우선순위 | 기능 | 판정 | 주요 지지 관점 | 근거 |
|---------|------|------|---------------|------|
| 1 | **트랙 존 시스템** (진흙/빙판/부스터 패드/바람 터널) | ✅ 채택 | PD, A1, B1, B2, C | 완전 새로운 "트랙 기반" 차원, 공정성 완벽, 구현 구조 명확 |
| 2 | **유성우 — 전체 동시 기믹 이벤트** | ✅ 채택 | A2, B2, C | 기존 기믹과 다른 "전체 동시 발동" 경험, 구현 비용 낮음, 스펙터클 순간 |
| 3 | **체력(HP) 누적 피로** | ⏸ 보류 | A1 | 서사 강화 효과 있으나 시뮬레이션 상태 관리 복잡도 증가 → 별도 설계 필요 |
| 4 | **도미노 연쇄 기믹** | ⏸ 보류 | PD | 말 간 상호작용 흥미롭지만 순위 기반 타겟팅 공정성 설계 필요 |
| 5 | **텔레포트/순위 셔플** | ❌ 기각 | E | 배팅 게임 공정성 직결 |

### 관점 간 충돌

- **A2 vs E**: 텔레포트 기믹 — A2는 드라마틱, E는 공정성 직결 문제 → 기각
- **A1 vs B1**: 체력 시스템 — 아이디어는 좋으나 구현 복잡도 → 보류, 별도 설계

---

## 5. 채택 기능 상세

### 채택 1: 트랙 존 시스템 (Track Zone)

**콘셉트**: 서버가 경주 시작 전 트랙에 2~3개 특수 구간 배치. 모든 말이 해당 구간 통과 시 동일 효과 적용.

**존 타입 초안**:

| 타입 | 시각 | 속도 효과 | 비고 |
|------|------|----------|------|
| `mud` 진흙 | 갈색 구간 | ×0.6~0.7 | 구간 내내 감속 |
| `ice` 빙판 | 하늘색 구간 | ×0.85, 통과 후 slip 연쇄 가능 | 미끄러짐 연출 |
| `boost_pad` 부스터 패드 | 노란 화살표 구간 | ×1.4~1.6 | 구간 내내 가속 |
| `wind_tunnel` 바람 터널 | 보라 구간 | ×1.2 | 특정 탈것 보정 가능 |

**공정성**: 모든 말 동일 구간 통과 → 완전 공정
**동기화**: `horseRaceStarted`에 `trackZones` 배열 포함 → 클라이언트 동일 재생

### 채택 2: 유성우 이벤트 (Meteor Shower)

**콘셉트**: 경주 중 특정 진행률(0.4~0.6 구간)에서 전체 동시 이벤트 발동. 각 말의 효과는 서버 사전 계산.

**효과 분포 (각 말 독립 랜덤)**:
- 40%: 무효과 (near miss)
- 30%: 단기 감속 (×0.5, 300ms)
- 20%: 단기 부스터 (×1.5, 300ms)
- 10%: 정지 (×0, 200ms)

**시각**: 화면 전체 별똥별 파티클 + 각 말 hit/miss 이펙트

---

## 6. 다음 단계 (Action Items)

> 구현 상세: [`2026-02-27-1000-horse-new-gimmick-v2-impl.md`](../impl/2026-02-27-1000-horse-new-gimmick-v2-impl.md)

- [ ] 트랙 존 시스템 구현 — `socket/horse.js` (generateTrackZones) + `config/horse/race.json` (zones 섹션 추가) + `horse-race-multiplayer.html` (존 시각화 + 속도 적용)
- [ ] 유성우 이벤트 구현 — `socket/horse.js` (globalEvents 생성) + `horse-race-multiplayer.html` (파티클 이펙트)
- [ ] 체력 시스템 — 별도 설계 문서 필요
- [ ] 도미노 연쇄 기믹 — 별도 설계 문서 필요
