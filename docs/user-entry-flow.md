# 사용자 입장 흐름 가이드

## 현재 시스템 구조

### 1단계: 서버 관리 (React 앱)
- **URL**: `http://localhost:5173`
- **기능**: 서버 생성, 서버 목록 조회, 서버 입장

### 2단계: 게임 화면
- **URL**: `http://localhost:3000/dice-game-multiplayer.html`
- **기능**: 실제 게임 플레이

---

## 사용자 입장 방법

### 방법 1: 서버 생성 후 입장 (호스트)ㄹ

1. **React 앱 접속**
   ```
   http://localhost:5173
   ```

2. **이름 입력**
   - 이름 입력 후 "시작하기" 클릭

3. **서버 생성**
   - "+ 서버 생성" 버튼 클릭
   - 서버 이름, 설명 입력
   - "생성" 버튼 클릭

4. **게임 시작**
   - 서버 입장 화면에서 "주사위 게임 시작" 버튼 클릭
   - 자동으로 게임 화면으로 이동

5. **게임 화면에서 방 생성**
   - 게임 화면에서 방 이름 입력
   - 방 생성 후 게임 시작

---

### 방법 2: 기존 서버 입장 (일반 사용자)

1. **React 앱 접속**
   ```
   http://localhost:5173
   ```

2. **이름 입력**
   - 이름 입력 후 "시작하기" 클릭

3. **서버 선택**
   - 서버 목록에서 원하는 서버 선택
   - "입장하기" 버튼 클릭

4. **게임 시작**
   - 서버 입장 화면에서 "주사위 게임 시작" 버튼 클릭
   - 자동으로 게임 화면으로 이동

5. **방 입장**
   - 게임 화면에서 방 목록 확인
   - 원하는 방 선택 후 입장

---

### 방법 3: 직접 게임 화면 접속 (기존 방식)

1. **게임 화면 직접 접속**
   ```
   http://localhost:3000
   또는
   http://localhost:3000/dice-game-multiplayer.html
   ```

2. **이름 입력 및 방 생성/입장**
   - 이름 입력
   - 방 생성 또는 기존 방 입장

**⚠️ 주의**: 이 방법은 서버 시스템과 연결되지 않습니다. 게임 기록이 서버별로 저장되지 않습니다.

---

## 현재 시스템의 제한사항

### ⚠️ 문제점

1. **서버 시스템과 게임 화면 분리**
   - React 앱에서 서버를 생성/입장해도
   - 게임 화면은 여전히 기존 방 시스템을 사용
   - 서버 ID가 게임 화면에서 활용되지 않음

2. **게임 기록 저장**
   - 게임 기록은 서버별로 저장되지만
   - 게임 화면에서 서버 ID를 전달하지 않음
   - 따라서 서버별 기록이 제대로 연결되지 않을 수 있음

3. **두 가지 입장 경로**
   - React 앱 → 게임 화면 (서버 시스템 사용)
   - 직접 게임 화면 접속 (기존 방식)

---

## 개선 방안

### 옵션 1: 게임 화면에서 서버 ID 사용 (권장)

**변경 사항:**
1. React 앱에서 게임 화면으로 이동 시 서버 ID를 URL 파라미터로 전달
   ```javascript
   window.location.href = `/dice-game-multiplayer.html?serverId=${currentServer.id}`;
   ```

2. 게임 화면에서 서버 ID를 읽어서 사용
   ```javascript
   const urlParams = new URLSearchParams(window.location.search);
   const serverId = urlParams.get('serverId');
   ```

3. 게임 기록 저장 시 서버 ID 포함
   - 서버 ID가 있으면 서버별 기록 저장
   - 없으면 기존 방식 유지

**장점:**
- 서버 시스템과 게임 화면 연결
- 서버별 기록 정확히 저장
- 기존 방식도 유지 가능

**단점:**
- 게임 화면 코드 수정 필요

---

### 옵션 2: React 앱에 게임 화면 통합

**변경 사항:**
1. React 앱에 게임 화면 컴포넌트 추가
2. 서버 입장 후 바로 게임 화면 표시
3. 서버 ID를 자동으로 전달

**장점:**
- 완전히 통합된 경험
- 서버 시스템과 완벽 연결

**단점:**
- 대규모 리팩토링 필요
- 기존 HTML 게임 화면을 React로 전환 필요

---

### 옵션 3: 현재 상태 유지

**현재 방식:**
- React 앱: 서버 관리만
- 게임 화면: 기존 방식 유지
- 서버별 기록은 서버에서 자동으로 관리

**장점:**
- 변경 사항 없음
- 기존 코드 유지

**단점:**
- 서버 시스템과 게임 화면 분리
- 사용자 혼란 가능

---

## 추천 사항

**옵션 1 (게임 화면에서 서버 ID 사용)**을 추천합니다.

이유:
- 최소한의 코드 변경
- 서버 시스템과 게임 화면 연결
- 기존 방식도 유지 가능
- 점진적 개선 가능

---

## 사용자 가이드 (현재 상태)

### 새 사용자

1. `http://localhost:5173` 접속
2. 이름 입력
3. 서버 생성 또는 입장
4. "주사위 게임 시작" 클릭
5. 게임 화면에서 방 생성/입장
6. 게임 플레이

### 기존 사용자

1. `http://localhost:3000` 접속
2. 이름 입력
3. 방 생성/입장
4. 게임 플레이

---

## 다음 단계

1. 게임 화면에서 서버 ID 지원 추가 (옵션 1)
2. 서버별 기록 조회 기능 추가
3. React 앱에서 서버별 기록 표시
