# 🎮 LAMDiceBot - 멀티플레이어 게임 플랫폼

**실시간 멀티플레이어 게임 플랫폼 - 주사위, 룰렛, 팀 배정 게임을 한 곳에서!**

## ✨ 주요 특징

- 🎯 **완전한 공정성**: 서버에서 난수 생성 (조작 불가능)
- 🌐 **실시간 멀티플레이어**: WebSocket 기반 실시간 동기화
- 🎲 **다양한 게임 모드**: 주사위, 룰렛, 팀 배정 게임
- 🍔 **주문받기 기능**: 게임과 함께 주문 관리
- 🔒 **안전한 보안**: DDoS 방어, Rate limiting
- 🚀 **간편한 배포**: Railway 클라우드 배포 지원
- 📱 **모바일 지원**: 반응형 디자인

## 🎮 게임 모드

### 🎲 주사위 게임
- 서버에서 난수 생성으로 100% 공정성 보장
- 개인별 주사위 범위 설정 (2~100,000)
- 실시간 결과 표시 및 정렬
- 게임 룰 설정 및 저장
- 하이/로우/니어 게임 모드

### 🎰 룰렛 게임
- 참가자 이름이 파이 차트 형태로 표시
- 파스텔톤 색상 자동 배정
- 모든 클라이언트에서 동일한 애니메이션 재생
- 자연스러운 이름 표시 스타일
- 최소 2명 이상 준비 시 시작 가능

### 👥 팀 배정 게임
- 플레이어를 여러 팀으로 랜덤 배정
- 팀 구성 및 인원 제한 설정
- 필수 플레이어 지정
- 같은 팀 금지 설정
- 경우의 수 자동 계산

## 🆕 최신 업데이트

### v2.3 (2026-01)
- **룰렛 이름 표시 스타일 개선**: 하얀 테두리 효과 완화로 더 자연스러운 시각적 표현
- **팀 배정 게임 모드 추가**: 플레이어를 여러 팀으로 랜덤 배정
- **룰렛 게임 모드 추가**: 파이 차트 형태의 룰렛 게임
- **주문받기 기능**: 룰렛 게임에도 주문받기 기능 추가

### v2.2 (2025-12-21)
- **호스트의 참여자 강퇴 기능**: 더블 클릭으로 불성실 참여자 제외
- **자동 게임 종료 로직 개선**: 중도 퇴장 시 즉시 결과 도출

### v2.1 (2025-12)
- **주문받기 기능**: Host가 주문받기 시작/종료, 메뉴 자동완성
- **게임 룰 기능**: Host만 게임 룰 설정 가능
- **메뉴 자동완성**: 자주 쓰는 메뉴 서버 저장 및 실시간 제안

## 📋 필요한 것

- Node.js (버전 18 이상)
- npm (Node.js와 함께 설치됨)
- (선택) PostgreSQL - 게시판 데이터 영구 저장용

## 🚀 빠른 시작

### 방법 1: 로컬 실행 (친구들과 같은 Wi-Fi)

#### 1. 패키지 설치
```bash
npm install
```

#### 2. 서버 실행
```bash
npm start
```
또는
```bash
node server.js
```

#### 3. 접속하기

**서버를 실행한 컴퓨터에서:**
```
http://localhost:3000
```

**같은 Wi-Fi에 연결된 다른 기기에서:**
```
http://[서버컴퓨터IP]:3000
```

### 방법 2: Railway 클라우드 배포 (인터넷 어디서나)

#### Railway 배포 장점
- ✅ 인터넷만 있으면 어디서나 접속
- ✅ HTTPS 자동 적용 (보안)
- ✅ 무료로 시작 가능
- ✅ PC 꺼져도 계속 실행
- ✅ 자동 DDoS 방어

#### Railway 배포 방법
1. GitHub에 코드 업로드
2. Railway.app 가입
3. "New Project" → "Deploy from GitHub"
4. 자동 배포! (5분 소요)

**자세한 배포 가이드:** `Railway배포완벽가이드.md` 참조

## 🎮 사용 방법

### 기본 플레이
1. **Host 입장**: 한 명이 "Host로 입장" 체크하고 입장
2. **게임 타입 선택**: 주사위/룰렛/팀 배정 중 선택
3. **다른 사람들 입장**: 같은 주소로 접속해서 이름만 입력하고 입장
4. **게임 시작**: 각 게임 모드에 맞게 설정 후 시작

### 주사위 게임
1. **게임 룰 설정** (선택): Host가 게임 룰 입력
2. **주사위 범위 설정**: 개인별로 원하는 최대값 설정 (2~100,000)
3. **게임 시작**: Host가 "게임 시작" 버튼 클릭
4. **주사위 굴리기**: 모든 사람이 주사위 굴리기!
5. **결과 확인**: 실시간으로 모든 결과 표시 (정렬 가능)

### 룰렛 게임
1. **준비하기**: 참가자들이 "준비" 버튼 클릭 (최소 2명 이상)
2. **룰렛 시작**: Host가 "🎰 룰렛 시작!" 버튼 클릭
3. **결과 확인**: 룰렛이 회전하여 당첨자 결정

### 팀 배정 게임
1. **플레이어 추가**: Host가 플레이어 이름 입력 (쉼표로 구분 가능)
2. **팀 구성 설정**: 팀 이름과 인원수 설정
3. **필수 플레이어 지정** (선택): 특정 팀에 반드시 들어가야 할 플레이어 지정
4. **같은 팀 금지 설정** (선택): 함께 들어가면 안 되는 플레이어 지정
5. **팀 배정하기**: "🎲 팀 배정하기" 버튼 클릭

### 주문받기 기능
1. **주문받기 시작**: Host가 "주문받기 시작" 버튼 클릭
2. **주문 입력**: 각 사용자가 주문 내용 입력
   - 메뉴 자동완성 지원 (방향키로 선택 가능)
   - "메뉴 관리"에서 자주 쓰는 메뉴 등록 가능
3. **주문 확인**: 모든 사용자가 실시간으로 주문 목록 확인
   - 같은 메뉴는 자동으로 그룹화되어 표시
   - 인원수가 크게 표시됨
4. **주문받기 종료**: Host가 "주문받기 종료" 버튼 클릭

### 공정성 보장
```
✅ 서버에서 난수 생성
✅ 클라이언트 조작 불가능
✅ 투명한 결과 공개
✅ 모든 기록 저장
```

## 🔒 보안 기능

### 현재 보안 수준: ⭐⭐⭐⭐⭐

#### 구현된 보안
- ✅ **서버 난수 생성** (완전 공정)
- ✅ **HTTPS/SSL** (Railway 자동)
- ✅ **Rate Limiting** (DDoS 방어)
- ✅ **입력값 검증** (모든 입력)
- ✅ **권한 관리** (Host 검증)
- ✅ **최대 접속자 제한** (50명)
- ✅ **WebSocket 보호** (메시지 제한)

## 📁 프로젝트 구조

```
LAMDiceBot/
├── server.js                      # 서버 (난수 생성!)
├── dice-game-multiplayer.html     # 주사위 게임 클라이언트
├── roulette-game-multiplayer.html  # 룰렛 게임 클라이언트
├── team-game-multiplayer.html     # 팀 배정 게임 클라이언트
├── frequentMenus.json              # 자주 쓰는 메뉴 목록
├── suggestions.json                # 게시판 데이터 (파일 시스템)
├── package.json                    # 의존성
├── .gitignore                     # Git 제외 파일
├── README.md                       # 이 파일
├── CHANGELOG.md                    # 변경 내역
├── COMMIT_MESSAGE.md               # 커밋 메시지
├── Railway배포완벽가이드.md        # 배포 가이드
└── docs/
    └── project_plan.md             # 프로젝트 계획
```

## 🛠️ 설정 변경

### 포트 변경
`server.js` 파일에서:
```javascript
const PORT = process.env.PORT || 3000;
```

### 최대 접속자 수 변경
`server.js` 파일에서:
```javascript
const MAX_CONNECTIONS = 50; // 원하는 숫자로 변경
```

### Rate Limit 변경
`server.js` 파일에서:
```javascript
max: 100,  // 1분당 요청 수
windowMs: 60 * 1000  // 시간 윈도우
```

### PostgreSQL 연결 (선택)
환경변수 설정:
```bash
DATABASE_URL=postgresql://user:password@host:port/database
```

## 🔧 문제 해결

### 연결이 안 되요
1. 같은 Wi-Fi에 연결되어 있나요?
2. 방화벽에서 포트를 허용했나요?
3. 서버가 실행 중인가요?

### Railway 배포가 안 되요
1. GitHub에 코드가 올라갔나요?
2. `package.json`이 있나요?
3. Railway 로그 확인해보세요

### 게임이 안 시작되요
1. Host로 입장했나요?
2. 최소 인원이 준비되었나요? (룰렛: 2명 이상)
3. 네트워크 연결을 확인하세요

### 주문받기가 안 되요
1. Host가 "주문받기 시작" 버튼을 눌렀나요?
2. 주문 입력 필드가 활성화되어 있나요?
3. 주문받기 섹션이 표시되어 있나요?

## 📚 추가 문서

- **CHANGELOG.md**: 상세한 변경 내역
- **Railway배포완벽가이드.md**: 클라우드 배포 방법
- **docs/project_plan.md**: 프로젝트 계획 및 최근 업데이트

## 🎯 기술 스택

```javascript
Backend:
  - Node.js
  - Express.js
  - Socket.IO
  - express-rate-limit
  - pg (PostgreSQL - 선택)
  - fs (파일 시스템 - 메뉴/게시판 저장용)

Frontend:
  - HTML5
  - CSS3
  - Socket.IO Client
  - Vanilla JavaScript
  - LocalStorage (메뉴 자동완성)

Security:
  - Server-side RNG (Random Number Generation)
  - Rate Limiting
  - Input Validation
  - HTTPS/SSL (Railway)
```

## 🌟 특별한 점

### 다른 게임 앱과의 차이
```
일반 게임 앱:
  ❌ 클라이언트에서 난수 생성
  ❌ 조작 가능
  ❌ 신뢰할 수 없음

이 프로젝트:
  ✅ 서버에서 난수 생성
  ✅ 조작 불가능
  ✅ 100% 공정성
  ✅ 멀티플레이어
  ✅ 실시간 동기화
  ✅ 다양한 게임 모드
```

## 📜 라이선스

MIT License - 자유롭게 사용하세요!

## 👥 기여하기

개선 아이디어나 버그 리포트 환영합니다!
1. Fork
2. 기능 추가
3. Pull Request

## 📮 지원

문제가 있으시면:
1. `CHANGELOG.md` 먼저 확인
2. `Railway배포완벽가이드.md` 확인
3. 문제 해결 섹션 확인

## 🎊 감사합니다!

즐거운 게임 되세요! 🎲🎰👥✨

---

**버전:** 2.3 (룰렛 이름 표시 스타일 개선)  
**최종 업데이트:** 2026-01  
**보안 등급:** ⭐⭐⭐⭐⭐
