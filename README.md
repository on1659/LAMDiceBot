# 🎲 주사위 굴리기 멀티플레이어 (완전 공정 버전)

**실시간 멀티플레이어 주사위 게임 - 100% 공정성 보장!**

## ✨ 주요 특징

- 🎯 **완전한 공정성**: 서버에서 난수 생성 (조작 불가능)
- 🌐 **실시간 멀티플레이어**: WebSocket 기반
- 🔒 **안전한 보안**: DDoS 방어, Rate limiting
- 🚀 **간편한 배포**: Railway 클라우드 배포 지원
- 📱 **모바일 지원**: 반응형 디자인

## 🆕 v2.0 업데이트 (2024-10-30)

### 🎊 서버 난수 생성 시스템
```javascript
✅ 클라이언트 조작 완전 차단
✅ 브라우저 콘솔 조작 무효
✅ 암호학적으로 안전한 난수
✅ 100% 공정한 결과 보장
```

**이전 버전과의 차이:**
- 이전: 클라이언트가 결과 생성 → 조작 가능 ❌
- 현재: 서버가 결과 생성 → 조작 불가능 ✅

## 🆕 v2.1 업데이트 (2024-12)

### 🍔 주문받기 기능
- Host가 주문받기 시작/종료 가능
- 모든 사용자가 주문 입력 및 실시간 확인
- 같은 메뉴를 주문한 사람들 자동 그룹화
- 주문 인원수 크게 표시 (주사위 숫자처럼)
- 가나다순/가나다 역순 정렬
- 주문하지 않은 사람 목록 표시

### 📋 게임 룰 기능
- Host만 게임 룰 설정 가능
- 게임 시작 후 수정 불가능 (공정성 보장)
- 게임 시작 시 자동 저장 (저장 버튼 안 눌러도 저장됨)
- 모든 사용자가 룰 확인 가능

### 🔤 메뉴 자동완성 기능
- 자주 쓰는 메뉴를 서버 파일에 저장 (`frequentMenus.json`)
- 입력 시 실시간 자동완성 제안
- 여러 개의 제안이 있으면 드롭다운 표시
- 방향키(↑/↓)로 제안 선택
- Tab/Enter로 자동완성 적용
- 메뉴 관리 UI로 메뉴 추가/삭제

## 📋 필요한 것
- Node.js (버전 14 이상)
- npm (Node.js와 함께 설치됨)

## 🚀 빠른 시작

### 방법 1: 로컬 실행 (친구들과 같은 Wi-Fi)

#### 1. 패키지 설치
```bash
npm install
```

#### 2. 서버 실행
```bash
npm start
```
또는
```bash
node server.js
```

#### 3. 접속하기

**서버를 실행한 컴퓨터에서:**
```
http://localhost:3000
```

**같은 Wi-Fi에 연결된 다른 기기에서:**
```
http://[서버컴퓨터IP]:3000
```

### 방법 2: Railway 클라우드 배포 (인터넷 어디서나)

#### Railway 배포 장점
- ✅ 인터넷만 있으면 어디서나 접속
- ✅ HTTPS 자동 적용 (보안)
- ✅ 무료로 시작 가능
- ✅ PC 꺼져도 계속 실행
- ✅ 자동 DDoS 방어

#### Railway 배포 방법
1. GitHub에 코드 업로드
2. Railway.app 가입
3. "New Project" → "Deploy from GitHub"
4. 자동 배포! (5분 소요)

**자세한 배포 가이드:** `Railway배포완벽가이드.md` 참조

## 🔍 내 IP 주소 찾기 (로컬 실행 시)

### Windows:
```bash
ipconfig
```
→ IPv4 주소를 찾으세요 (예: 192.168.0.10)

### Mac/Linux:
```bash
ifconfig
```
또는
```bash
ip addr
```

## 🎮 사용 방법

### 기본 플레이
1. **Host 입장**: 한 명이 "Host로 입장" 체크하고 입장
2. **다른 사람들 입장**: 같은 주소로 접속해서 이름만 입력하고 입장
3. **게임 룰 설정** (선택): Host가 게임 룰 입력 (예: 가장 높은 숫자가 승리)
4. **주사위 범위 설정**: 개인별로 원하는 최대값 설정 (2~100,000)
5. **게임 시작**: Host가 "게임 시작" 버튼 클릭
6. **주사위 굴리기**: 모든 사람이 주사위 굴리기!
7. **결과 확인**: 실시간으로 모든 결과 표시 (정렬 가능)
8. **게임 종료**: Host가 "게임 종료" 버튼 클릭

### 주문받기 기능
1. **주문받기 시작**: Host가 "주문받기 시작" 버튼 클릭
2. **주문 입력**: 각 사용자가 주문 내용 입력
   - 메뉴 자동완성 지원 (방향키로 선택 가능)
   - "메뉴 관리"에서 자주 쓰는 메뉴 등록 가능
3. **주문 확인**: 모든 사용자가 실시간으로 주문 목록 확인
   - 같은 메뉴는 자동으로 그룹화되어 표시
   - 인원수가 크게 표시됨
4. **주문받기 종료**: Host가 "주문받기 종료" 버튼 클릭

### 공정성 보장
```
✅ 서버에서 난수 생성
✅ 클라이언트 조작 불가능
✅ 투명한 결과 공개
✅ 모든 기록 저장
```

## 🔒 보안 기능

### 현재 보안 수준: ⭐⭐⭐⭐⭐

#### 구현된 보안
- ✅ **서버 난수 생성** (완전 공정)
- ✅ **HTTPS/SSL** (Railway 자동)
- ✅ **Rate Limiting** (DDoS 방어)
- ✅ **입력값 검증** (모든 입력)
- ✅ **권한 관리** (Host 검증)
- ✅ **최대 접속자 제한** (50명)
- ✅ **WebSocket 보호** (메시지 제한)

**자세한 보안 정보:** `보안가이드.md` 참조

## 📊 적합한 사용 용도

### ✅ 완전히 안전
```
✅ 친구들과 게임
✅ 팀 미팅 순서 정하기
✅ 커뮤니티 이벤트
✅ 소규모 대회 (상금 포함!)
✅ 공정성이 중요한 모든 경우
```

### ⚠️ 선택적 보안 강화 권장
```
⚠️ 대규모 공개 서비스
⚠️ 높은 금액의 상금 게임
   → 방 코드 시스템 추가 권장
```

## 🛠️ 설정 변경

### 포트 변경
`server.js` 파일에서:
```javascript
const PORT = process.env.PORT || 3000;
```

### 최대 접속자 수 변경
`server.js` 파일에서:
```javascript
const MAX_CONNECTIONS = 50; // 원하는 숫자로 변경
```

### Rate Limit 변경
`server.js` 파일에서:
```javascript
max: 100,  // 1분당 요청 수
windowMs: 60 * 1000  // 시간 윈도우
```

## 📁 프로젝트 구조

```
dice-game-multiplayer/
├── server.js                    # 서버 (난수 생성!)
├── dice-game-multiplayer.html   # 클라이언트
├── frequentMenus.json           # 자주 쓰는 메뉴 목록 (서버 시작 시 자동 생성)
├── package.json                 # 의존성
├── .gitignore                   # Git 제외 파일
├── README.md                    # 이 파일
├── 보안가이드.md                # 보안 정보
├── Railway배포완벽가이드.md     # 배포 가이드
└── 서버난수생성_업데이트.md     # v2.0 변경사항
```

## ⚠️ 주의사항

### 로컬 실행 시
- 모든 사용자가 **같은 Wi-Fi**에 연결되어 있어야 합니다
- 방화벽에서 3000번 포트를 허용해야 할 수 있습니다
- 서버를 종료하면 모든 데이터가 초기화됩니다

### Railway 배포 시
- 무료 플랜: 월 $5 크레딧 (소규모 사용 충분)
- 데이터는 메모리에 저장 (재시작 시 초기화)
- 환경변수로 추가 보안 설정 가능

## 📱 모바일 접속

스마트폰도 접속 가능합니다!
- 로컬: `http://[서버IP]:3000`
- Railway: 배포된 URL (예: `https://dice-game-xxx.up.railway.app`)

## 🔧 문제 해결

### 연결이 안 되요
1. 같은 Wi-Fi에 연결되어 있나요?
2. 방화벽에서 포트를 허용했나요?
3. 서버가 실행 중인가요?

### Railway 배포가 안 되요
1. GitHub에 코드가 올라갔나요?
2. `package.json`이 있나요?
3. Railway 로그 확인해보세요

### 주사위가 안 굴려져요
1. 게임이 시작되었나요?
2. 참여자로 입장했나요?
3. 네트워크 연결을 확인하세요

### 주문받기가 안 되요
1. Host가 "주문받기 시작" 버튼을 눌렀나요?
2. 주문 입력 필드가 활성화되어 있나요?
3. 주문받기 섹션이 표시되어 있나요?

### 메뉴 자동완성이 안 되요
1. "메뉴 관리"에서 메뉴를 추가했나요?
2. 입력한 텍스트가 메뉴명과 일치하나요? (대소문자 구분 없음)
3. 여러 제안이 있을 때 방향키(↑/↓)로 선택할 수 있습니다

## 📚 추가 문서

- **보안가이드.md**: 보안 기능 상세 설명
- **Railway배포완벽가이드.md**: 클라우드 배포 방법
- **서버난수생성_업데이트.md**: v2.0 변경사항 상세

## 🎯 기술 스택

```javascript
Backend:
  - Node.js
  - Express.js
  - Socket.IO
  - express-rate-limit
  - fs (파일 시스템 - 메뉴 저장용)

Frontend:
  - HTML5
  - CSS3
  - Socket.IO Client
  - Vanilla JavaScript
  - LocalStorage (메뉴 자동완성)

Security:
  - Server-side RNG (Random Number Generation)
  - Rate Limiting
  - Input Validation
  - HTTPS/SSL (Railway)
```

## 🌟 특별한 점

### 다른 주사위 게임과의 차이
```
일반 주사위 앱:
  ❌ 클라이언트에서 난수 생성
  ❌ 조작 가능
  ❌ 신뢰할 수 없음

이 프로젝트:
  ✅ 서버에서 난수 생성
  ✅ 조작 불가능
  ✅ 100% 공정성
  ✅ 멀티플레이어
  ✅ 실시간 동기화
```

## 📜 라이선스

MIT License - 자유롭게 사용하세요!

## 👥 기여하기

개선 아이디어나 버그 리포트 환영합니다!
1. Fork
2. 기능 추가
3. Pull Request

## 📮 지원

문제가 있으시면:
1. `보안가이드.md` 먼저 확인
2. `Railway배포완벽가이드.md` 확인
3. 문제 해결 섹션 확인

## 🎊 감사합니다!

즐거운 주사위 게임 되세요! 🎲✨

---

**버전:** 2.1 (주문받기 & 자동완성 기능 추가)  
**최종 업데이트:** 2024-12  
**보안 등급:** ⭐⭐⭐⭐⭐
