feat: 이모티콘 설정 시스템 개선 및 채팅 이모티콘 반응 시스템 추가

## 주요 변경사항

### 1. 이모티콘 설정 시스템 개선
- **이모티콘 설정을 JSON 파일로 분리**
  - 이모티콘 설정을 `emoji-config.json` 파일로 분리
  - HTML 파일 수정 없이 JSON 파일만으로 이모티콘 추가/수정 가능
  - 페이지 로드 시 자동으로 이모티콘 설정 파일 읽어오기
  - JSON 파일 로드 후 기존 채팅 메시지의 이모티콘 버튼 자동 업데이트
  - 이모티콘 확장성 향상 (기본 3개 → 무제한 추가 가능)

### 2. 채팅 이모티콘 반응 시스템 추가
- **주사위 게임 채팅에 이모티콘 반응 기능 추가**
  - 채팅 메시지에 하트(❤️), 따봉(👍), 슬퍼요(😢) 이모티콘 반응 추가 가능
  - 기본 상태: 이모티콘 버튼이 보이지 않음
  - 호버 시: 메시지에 마우스를 올리면 이모티콘 버튼이 투명하게 표시됨
  - 클릭 후: 이모티콘을 클릭하면 반응이 추가되어 모든 사람에게 항상 표시됨
  - 반응 수 표시: 버튼 내부에 이모티콘과 숫자가 함께 표시됨

- **룰렛 게임 채팅에도 동일한 이모티콘 시스템 적용**
  - 주사위 게임과 동일한 이모티콘 반응 기능 제공
  - 타임스탬프 옆에 인라인으로 이모티콘 버튼 표시
  - 호버 및 클릭 동작 동일하게 작동

### 3. 이모티콘 반응 UI/UX 개선
- **타임스탬프 옆 인라인 표시**
  - 이모티콘 버튼이 타임스탬프와 같은 줄에 표시됨
  - 작은 크기(20px 높이)로 깔끔하게 표시
  - 둥근 사각형 버튼 스타일 적용

- **반응 수 표시**
  - 버튼 내부에 이모티콘과 숫자가 함께 표시됨
  - 흰색 숫자로 명확하게 표시
  - 폰트 크기 및 굵기 최적화

## 기술적 변경사항

### 서버 측 (server.js)
- **채팅 메시지 구조 확장**
  - `chatMessage` 객체에 `reactions` 필드 추가
  - 각 이모티콘별로 반응한 사용자 목록 저장
  - `toggleReaction` 이벤트 핸들러 추가
  - 반응 추가/제거 시 `messageReactionUpdated` 이벤트로 모든 클라이언트에 전송

### 클라이언트 측
- **주사위 게임 (dice-game-multiplayer.html)**
  - `displayChatMessage` 함수에 이모티콘 반응 UI 추가
  - 타임스탬프 옆에 이모티콘 버튼 인라인 표시
  - 호버 시 이모티콘 버튼 표시/숨김 로직
  - `messageReactionUpdated` 이벤트 핸들러 추가
  - 클라이언트 채팅 기록(`clientChatHistory`) 관리

- **룰렛 게임 (roulette-game-multiplayer.html)**
  - `addChatMessage` 함수에 이모티콘 반응 UI 추가
  - 주사위 게임과 동일한 이모티콘 시스템 적용
  - `messageReactionUpdated` 이벤트 핸들러 추가
  - 룰렛 채팅 기록(`window.rouletteChatHistory`) 관리

## 사용자 경험 개선
- 채팅 메시지에 간단한 반응을 추가할 수 있어 소통이 더욱 편리해짐
- 페이스북의 좋아요 시스템과 유사한 직관적인 UI/UX
- 호버 시에만 이모티콘 버튼이 표시되어 깔끔한 채팅 화면 유지
- 반응이 있는 메시지는 항상 표시되어 참여도를 한눈에 확인 가능

## 수정된 파일
- server.js
- dice-game-multiplayer.html
- roulette-game-multiplayer.html
- CHANGELOG.md
- COMMIT_MESSAGE.txt

---

fix: 주사위 게임 진행 상황 및 결과창 표시 개선

## 주요 변경사항

### 1. 주사위 진행 상황 실시간 갱신 개선
- `requestRoll` 이벤트 처리 시 `rollProgress` 이벤트를 함께 전송하도록 수정
- "주사위를 굴리지 않은 사람" 목록이 실시간으로 정확하게 갱신되도록 개선
- 주사위를 굴릴 때마다 진행 상황이 즉시 업데이트됨

### 2. 하이/로우/니어 게임 애니메이션 조건 확장
- **기존 조건 유지**: 최저/최고/가장 가까운 값에서 항상 애니메이션
- **추가 조건 (확률적 애니메이션)**:
  - 하이 게임: 지금까지 나온 값 중 두번째로 큰 값일 때 10% 확률, 세번째로 큰 값일 때 5% 확률
  - 로우 게임: 지금까지 나온 값 중 두번째로 큰 값일 때 10% 확률, 세번째로 큰 값일 때 5% 확률
  - 니어 게임: 타겟 숫자에서 두번째로 가까운 값일 때 10% 확률, 세번째로 가까운 값일 때 5% 확률
- 애니메이션이 나와도 항상 걸린 것은 아니라는 점을 명확히 함

### 3. 게임 종료 타이밍 개선
- 마지막 주사위 애니메이션이 완료된 후에 게임 종료 메시지가 표시되도록 대기 로직 추가
- 애니메이션 완료 후 대기 시간을 최적화 (1.5초 → 0.3초)
- 애니메이션이 없는 경우 즉시 처리 (0.5초 대기)
- 최대 타임아웃 5초로 설정하여 무한 대기 방지

### 4. 준비한 사람 제외 로직 개선
- 호스트가 준비한 사람을 제외할 때, 방에 없는 사용자도 준비 목록에서 제거 가능하도록 수정
- 준비 상태로 설정할 때만 방에 있는지 확인, 준비 취소는 방에 없어도 가능

### 5. 게임 종료 결과창 중복 표시 방지
- 전역 플래그(`window.allRolledMessageShown`)를 사용하여 중복 호출 방지
- DOM에서 이미 결과창이 있는지 확인하는 로직 추가
- 전역 `waitInterval` 관리로 여러 이벤트 발생 시 중복 interval 생성 방지
- `showMessage` 함수 내부에서도 중복 확인 로직 추가
- 게임 시작/종료 시 플래그 및 interval 정리

## 버그 수정
- 주사위를 굴려도 "주사위를 굴리지 않은 사람" 목록이 갱신되지 않던 문제 해결
- 마지막 주사위 애니메이션이 재생 중인데 게임 종료 메시지가 먼저 뜨던 문제 개선
- 게임 종료 후 결과창이 두 개씩 뜨던 문제 해결
- 애니메이션이 끝나기 전에 결과창이 중복으로 표시되던 문제 해결
- 방에서 나간 사용자가 준비 목록에 남아 있을 때 제외가 안 되던 문제 수정

## 기술적 변경사항

### 서버 측 (server.js)
- `requestRoll` 핸들러에서 `rollProgress` 이벤트 전송 로직 추가
- 하이/로우/니어 게임 애니메이션 조건 확장 (확률적 애니메이션 추가)
- `setUserReady` 핸들러에서 준비 취소 시 방에 없는 사용자도 처리 가능하도록 수정

### 클라이언트 측 (dice-game-multiplayer.html)
- `gameEnded` 이벤트 핸들러에 애니메이션 완료 대기 로직 추가
- 결과창 표시 시 전역 플래그 및 DOM 확인으로 중복 방지
- 전역 `waitInterval` 관리로 중복 interval 생성 방지
- 게임 시작/종료 시 플래그 및 interval 정리

## 수정된 파일
- server.js
- dice-game-multiplayer.html
- COMMIT_MESSAGE.txt
- CHANGELOG.md

---

feat: 호스트의 참여자 강퇴 기능 추가 및 당첨자 자동 판단 시스템 고도화

## 주요 변경사항

### 1. 참여자 강퇴 기능 (Kick) 추가
- 호스트가 접속자 목록에서 다른 사용자를 더블 클릭하여 강퇴 가능
- 게임 진행 중일 경우, 아직 주사위를 굴리지 않은 사람만 강퇴 가능하도록 보호 로직 적용
- 강퇴된 사용자에게는 알림창을 표시하고 로비로 자동 이동
- 참여자가 강퇴되거나 퇴장 시 즉시 게임 종료 조건 체크 강화

### 2. 당첨자 자동 표시 및 GPT 기반 커스텀 판단 기능
- 하이/로우/니어 룰일 때 모든 주사위 굴림 완료 시 당첨자 자동 표시
- 커스텀(기타) 룰일 때 서버에서 GPT API를 호출하여 당첨자 및 판단 근거 자동 표시
- gpt-5-nano 우선 시도 및 gpt-4o-mini 폴백 시스템 구축
- 상세한 GPT API 호출 로그(토큰, 비용, 시간 등) 서버 콘솔 출력

### 3. UI 및 사용성 개선
- 방 입장 시 헤더 및 푸터 자동 숨김 처리로 게임 몰입도 향상
- 개선사항 게시판의 삭제코드 필드에 숫자만 입력 가능하도록 입력 제한
- 중복되던 게임 종료 체크 로직을 `checkAndEndGame` 공통 함수로 통합

## 기술적 변경사항

### 서버 측 (server.js)
- `kickPlayer` 소켓 이벤트 핸들러 구현 및 `checkAndEndGame` 공통 함수 추가
- 서버 사이드 GPT API 호출 엔드포인트 및 결과 전송 로직 구현
- 모델별 비용 계산 및 상세 로깅 시스템 추가

### 클라이언트 측 (dice-game-multiplayer.html)
- 호스트 전용 더블 클릭 강퇴 이벤트 리스너 추가
- 하이/로우/니어 당첨자 자동 계산 및 GPT 결과 표시 로직 추가
- 방 입장/퇴장 상태에 따른 헤더/푸터 가시성 제어 CSS 추가

## 수정된 파일
- server.js
- dice-game-multiplayer.html
- contact.html
- COMMIT_MESSAGE.md
- COMMIT_MESSAGE.txt

---

feat: 개선사항 게시판 기능 추가 (Postgres 지원 및 관리자 삭제)

## 주요 변경사항

### 1. 개선사항 게시판 기능 추가
- **문의하기 페이지에 게시판 추가**
  - 게시글 작성, 조회, 삭제 기능
  - 실시간 게시글 목록 업데이트
  - 작성자 이름 localStorage 저장 (새로고침 후에도 유지)

### 2. Postgres 데이터베이스 지원
- **Postgres 우선, 파일 시스템 폴백**
  - Railway Postgres 자동 연결 지원
  - `DATABASE_URL` 환경변수로 Postgres 연결
  - Postgres 없으면 자동으로 파일 시스템 사용
  - 서버 재시작 후에도 데이터 유지

### 3. 관리자 삭제 기능
- **관리자 비밀번호로 모든 게시글 삭제 가능**
  - 환경변수 `ADMIN_PASSWORD` 설정 시 해당 비밀번호 사용
  - 환경변수 없으면 기본값 "0000" 사용
  - 본인 게시글은 작성자 이름으로 삭제 가능
  - 다른 사람 게시글은 관리자 비밀번호로 삭제

### 4. 비밀번호 입력 모달 추가
- **보안 강화: 비밀번호 마스킹 처리**
  - `prompt()` 대신 커스텀 모달 사용
  - `input type="password"`로 자동 마스킹 (****)
  - Enter 키로 확인, Escape 키로 취소
  - 모달 외부 클릭 시 닫기

## 기술적 변경사항

### 서버 측 (server.js)
- **Postgres 모듈 선택적 로드**
  - `pg` 모듈이 없어도 서버 실행 가능
  - `DATABASE_URL` 환경변수로 Postgres 연결
  - 서버 시작 시 테이블 자동 생성

- **게시판 이벤트 핸들러 추가**
  - `getSuggestions`: 게시글 조회
  - `createSuggestion`: 게시글 작성 (제목 100자, 내용 2000자 제한)
  - `deleteSuggestion`: 게시글 삭제 (작성자 또는 관리자)

- **데이터 저장 방식**
  - Postgres 우선 사용 (`suggestions` 테이블)
  - Postgres 실패 시 파일 시스템 폴백 (`suggestions.json`)
  - 최대 100개 게시글 저장

- **관리자 비밀번호 검증**
  - `ADMIN_PASSWORD` 환경변수 또는 기본값 "0000" 사용
  - 관리자면 작성자 확인 없이 삭제 가능

### 클라이언트 측 (contact.html)
- **게시판 UI 추가**
  - 게시글 작성 폼 (이름, 제목, 내용)
  - 게시글 목록 표시 (최신순)
  - 작성자만 삭제 버튼 표시 → 모든 게시글에 삭제 버튼 표시로 변경

- **비밀번호 입력 모달**
  - 커스텀 모달 디자인
  - 비밀번호 마스킹 처리
  - 키보드 단축키 지원 (Enter, Escape)

- **이름 저장 기능**
  - localStorage에 이름 저장
  - 새로고침 후에도 이름 유지
  - 이름 입력 시 실시간 삭제 버튼 업데이트

### 패키지 (package.json)
- `pg` 패키지 추가 (Postgres 클라이언트)

## UX 개선
- 게시글 삭제 시 비밀번호 마스킹 처리로 보안 강화
- 새로고침 후에도 이름 유지로 편의성 향상
- Postgres 사용 시 서버 재시작 후에도 데이터 유지
- 관리자 비밀번호 기본값 제공으로 로컬 테스트 용이

## 수정된 파일
- server.js
- contact.html
- package.json
- COMMIT_MESSAGE.txt

---

feat: 애드센스 승인을 위한 정책 페이지 및 콘텐츠 페이지 추가

## 주요 변경사항

### 1. 헤더 및 푸터 추가
- 페이지 상단에 네비게이션 헤더 추가
  * "다양한 주사위 규칙", "확률 분석 및 팁", "사이트 소개" 링크 포함
- 페이지 하단에 푸터 추가
  * "개인정보 처리방침", "이용 약관", "문의하기" 링크 포함

### 2. 정책 페이지 생성
- `privacy-policy.html`: 개인정보 처리방침 (간소화된 버전)
- `terms-of-service.html`: 이용 약관
- `contact.html`: 문의하기 (FAQ 포함)

### 3. 콘텐츠 페이지 생성 (각 500단어 이상)
- `dice-rules-guide.html`: 다양한 주사위 규칙 가이드
- `probability-analysis.html`: 확률 분석 및 전략 팁
- `about-us.html`: 사이트 소개 (공정성 보장, 신뢰도 강조)

### 4. 새로고침 시 참여자 정보 복원 개선
- 서버에 `everPlayedUsers` 필드 추가 (누적 참여자 목록)
- 게임 시작 시 `gamePlayers`를 `everPlayedUsers`에 누적 저장
- 클라이언트에서 서버의 `everPlayedUsers` 복원하여 새로고침 후에도 정보 유지

## 기술적 변경사항

### 서버 측 (server.js)
- `createRoomGameState()`에 `everPlayedUsers: []` 필드 추가
- `startGame` 이벤트에서 게임 시작 시 `gamePlayers`를 `everPlayedUsers`에 누적 추가
- `roomCreated`, `roomJoined`, `currentRoomInfo` 이벤트에 `everPlayedUsers` 전송

### 클라이언트 측 (dice-game-multiplayer.html)
- 헤더 네비게이션 추가 (게임 섹션 상단)
- 푸터 추가 (게임 섹션 하단)
- `initializeGameScreen`에서 서버의 `everPlayedUsers` 복원
- 중복 로직 제거 (서버에서 이미 누적 관리)

### 정책 페이지 (privacy-policy.html)
- 실제 서비스에 맞게 간소화
- 세션 종료 시 삭제 관련 내용 제거
- 개인정보 보호책임자 및 안전성 확보 조치 항목 제거
- 간단한 문의 안내로 대체

## UX 개선
- 애드센스 승인 요구사항 충족
- 사용자가 정책 및 콘텐츠 페이지에 쉽게 접근 가능
- 새로고침 후에도 참여자 정보가 정확하게 표시됨

## 수정된 파일
- server.js
- dice-game-multiplayer.html
- privacy-policy.html (신규)
- terms-of-service.html (신규)
- contact.html (신규)
- dice-rules-guide.html (신규)
- probability-analysis.html (신규)
- about-us.html (신규)
- COMMIT_MESSAGE.txt

---

fix: 사다리타기 게임 제거 및 기록 관리 개선

## 주요 변경사항

### 1. 사다리타기 게임 완전 제거
- ladder-game-multiplayer.html 파일 삭제
- 서버에서 사다리타기 관련 라우트 및 이벤트 핸들러 제거
- 클라이언트에서 사다리타기 게임 타입 선택 UI 제거
- 주사위 게임만 지원하도록 단순화

### 2. 하이/로우 게임 애니메이션 중복 저장 버그 수정
- 하이/로우/니어 애니메이션이 실행될 때 기록이 두 번 저장되던 문제 수정
- 애니메이션이 있는 경우 애니메이션 완료 후에만 저장하도록 수정

### 3. 연습 기록과 게임 기록 관리 개선
- 게임 시작 시 이전 게임 기록 모두 삭제
- 게임 종료 후 게임 기록 유지 (연습으로 바뀌지 않음)
- 게임 종료 후 연습 기록 추가 방지
- 연습 기록은 최초 방 입장 시나 게임 데이터 삭제 후에만 표시

## 기술적 변경사항

### 서버 측 (server.js)
- /ladder 라우트 제거
- ladderData 필드 제거
- createLadder, startLadderAnimation 이벤트 핸들러 제거
- roomCreated, roomJoined, currentRoomInfo에서 ladderData 전송 제거
- gameType 검증에서 ladder 제거 (항상 'dice'로 설정)
- 문법 오류 수정: isNotReㅈady → isNotReady
- if 문 중괄호 추가

### 클라이언트 측 (dice-game-multiplayer.html)
- 사다리타기 관련 코드 제거
- 게임 시작 시 이전 게임 기록 삭제
- 게임 종료 후 게임 기록 유지
- 하이/로우/니어 애니메이션 시 중복 저장 방지

## 버그 수정
- 하이/로우/니어 애니메이션 실행 시 기록이 두 번 저장되던 문제 해결
- 서버 문법 오류 수정
- 게임 종료 후 연습 기록이 표시되던 문제 해결
- 게임 시작 시 이전 게임 기록이 남아있던 문제 해결

## 수정된 파일
- server.js
- dice-game-multiplayer.html
- CHANGELOG.md
- COMMIT_MESSAGE.txt

---

feat: 게임 룰 선택 라디오 버튼 기능 추가

## 주요 변경사항

### 1. 게임 룰 선택 UI 추가
- 방 생성 후 게임 섹션에서 방장만 게임 룰을 선택할 수 있도록 라디오 버튼 추가
- 하이: 낮은 사람이 걸림
- 로우: 높은 사람이 걸림
- 니어: N에 가까운 사람 걸리기 (숫자 입력 필드 포함)
- 기타: 직접 룰 적기 (텍스트 영역 포함)

### 2. 저장 버튼 유효성 검사
- 니어 선택 시 숫자를 입력하지 않으면 저장 버튼 비활성화
- 기타 선택 시 텍스트를 입력하지 않으면 저장 버튼 비활성화
- 입력 시 실시간으로 저장 버튼 상태 업데이트

### 3. 권한 관리
- 방장만 게임 룰 선택 라디오 버튼 표시
- 참여자는 선택된 룰만 읽기 전용으로 표시
- 게임 시작 전에만 룰 수정 가능

## 기술적 변경사항

### 서버 측 (server.js)
- 방 생성 시 gameRules 파라미터 제거 (방 생성 후 설정하도록 변경)
- 방 생성 시 gameRules는 빈 문자열로 시작
- roomCreated 이벤트에 gameRules 포함하여 전송

### 클라이언트 측 (dice-game-multiplayer.html)
- **방 생성 섹션**
  * 게임 룰 선택 UI 제거 (방 생성 후 설정하도록 변경)

- **게임 섹션**
  * 게임 룰 선택 라디오 버튼 섹션 추가 (방장만 표시)
  * 라디오 버튼 선택에 따라 룰 텍스트 자동 생성
  * 니어 선택 시 숫자 입력 필 표시/숨김
  * 기타 선택 시 텍스트 영역 표시/숨김
  * 저장 버튼 활성화/비활성화 함수 추가 (`updateGameRulesSaveButtonState`)
  * 룰 텍스트 파싱 함수 추가 (`parseGameRulesToRadio`)

- **이벤트 리스너**
  * 라디오 버튼 변경 시 룰 텍스트 업데이트 및 저장 버튼 상태 확인
  * 니어 숫자 입력 시 실시간 업데이트
  * 기타 룰 입력 시 실시간 업데이트

- **유효성 검사**
  * 저장 버튼 클릭 시 니어/기타 입력 여부 재확인
  * 입력이 없으면 알림 표시 및 포커스 이동

## UX 개선
- 방 생성 시 복잡한 설정 제거로 사용자 경험 개선
- 방 생성 후 필요에 따라 룰 설정 가능
- 니어/기타 선택 시 필수 입력 안내 (저장 버튼 비활성화)

## 수정된 파일
- server.js
- dice-game-multiplayer.html
- COMMIT_MESSAGE.txt

---

fix: 방 유지 조건 개선 및 새로고침 시 데이터 복원

## 주요 변경사항

### 1. 방 유지 조건 개선
- 모든 사용자가 나가도 방은 지정된 시간(1/3/6시간)까지 유지됨
- 모든 사용자가 나가면 방장 정보 초기화
- 빈 방에 첫 번째 입장자를 자동으로 방장으로 설정

### 2. 새로고침 시 데이터 복원 개선
- 브라우저 캐시 방지 헤더 추가 (HTML 메타 태그 및 서버 헤더)
- 진행 상황 복원 (rolledUsersInGame 복원 및 진행 상황 업데이트)
- 채팅 기록 복원 (재연결 시 채팅 기록 전송 및 표시)

## 기술적 변경사항

### 서버 측 (server.js)
- `leaveRoom` 함수 수정: 모든 사용자가 나가도 방 삭제하지 않고 유지
- `disconnect` 이벤트 수정: 모든 사용자가 나가도 방 삭제하지 않고 유지
- 방장 정보 초기화: `room.hostId = null`, `room.hostName = null`
- 방 입장 로직 개선: 빈 방에 첫 입장자를 자동으로 방장으로 설정
- 재연결 시 채팅 기록 전송 추가
- 캐시 방지 헤더 추가 (정적 파일 및 메인 라우트)
- `userName` const 재할당 에러 수정 (`inputUserName`으로 변경)

### 클라이언트 측 (dice-game-multiplayer.html)
- 캐시 방지 메타 태그 추가 (`Cache-Control`, `Pragma`, `Expires`)
- 진행 상황 복원 로직 추가 (`rolledUsersInGame` 복원 및 `updateProgress` 호출)
- 채팅 기록 복원 로직 개선 (항상 초기화하고 표시)

## 버그 수정
- 새로고침 시 진행 상황이 0/0으로 표시되던 문제 해결
- 새로고침 시 채팅 기록이 사라지던 문제 해결
- 새로고침 시 주사위를 굴린 사람이 반영되지 않던 문제 해결
- `userName` const 재할당 에러 수정

## 수정된 파일
- server.js
- dice-game-multiplayer.html
- ladder-game-multiplayer.html
- CHANGELOG.md
- COMMIT_MESSAGE.txt

---

fix: 하이/로우 게임 애니메이션 조건 수정 및 활성화 조건 완화

## 주요 변경사항

### 1. 하이/로우 게임 애니메이션 조건 수정
- 하이 게임: 지금까지 결과 중 제일 작은 값이 나왔을 때 애니메이션
- 로우 게임: 지금까지 결과 중 제일 큰 값이 나왔을 때 애니메이션
- 기존에 반대로 되어 있던 조건을 올바르게 수정

### 2. 애니메이션 활성화 조건 완화
- 참여자 조건: 5명 이상 → 4명 이상
- 굴림 순서: 6번째 이후 → 4번째 이후

## 기술적 변경사항

### 서버 측 (server.js)
- `isHighGameAnimation` 조건 수정
  * 최고값 비교 → 최저값 비교로 변경 (`result > maxRoll` → `result < minRoll`)
  * 참여자 조건: `>= 5` → `>= 4`
  * 굴림 순서: `rolledUsers.length >= 5` → `>= 3`

- `isLowGameAnimation` 조건 수정
  * 최저값 비교 → 최고값 비교로 변경 (`result < minRoll` → `result > maxRoll`)
  * 참여자 조건: `>= 5` → `>= 4`
  * 굴림 순서: `rolledUsers.length >= 5` → `>= 3`

- `isNearGameAnimation` 조건 수정
  * 참여자 조건: `>= 5` → `>= 4`
  * 굴림 순서: `rolledUsers.length >= 5` → `>= 3`

## 버그 수정
- 하이 게임과 로우 게임의 애니메이션 조건이 반대로 되어 있던 문제 해결

## 수정된 파일
- server.js
- CHANGELOG.md
- COMMIT_MESSAGE.txt

---

fix: IP 중복 체크 및 MAC 주소 체크 로직 강화

  ## 주요 변경사항

  ### 1. IP 추출 로직 개선
  - IPv6-mapped IPv4 주소 처리 추가 (`::ffff:` 제거)
  - 프록시/로드밸런서 환경에서 IP 추출 정확도 향상
  - 다양한 소켓 속성에서 IP 주소 추출 시도
  - 로컬 테스트 환경 IPv6 주소를 IPv4로 변환

  ### 2. 방 생성 시 IP 체크 추가
  - 기존: 방 입장 시에만 IP 체크
  - 변경: 방 생성 시에도 IP/deviceId 중복 체크 수행
  - 다른 방에 이미 입장한 경우 방 생성 차단
  - 모든 소켓을 확인하여 같은 IP/deviceId를 가진 사용자 검색

  ### 3. 방 입장 시 IP 체크 개선
  - 기존: 같은 방 내에서만 IP 체크
  - 변경: 모든 방에서 IP/deviceId 중복 체크
  - deviceId가 있으면 IP와 deviceId 모두 확인
  - deviceId가 없으면 IP만 확인

  ### 4. getCurrentRoom 핸들러에도 IP 체크 추가
  - 재연결 시에도 IP/deviceId 중복 체크 수행
  - 같은 이름은 재연결로 간주하여 허용
  - 다른 이름으로 중복 접속 시 차단

  ### 5. 디버깅 로그 추가
  - IP 체크가 작동할 때 콘솔에 상세 로그 출력
  - 소켓 연결 시 IP 주소와 socket.id 로깅

  ## 기술적 변경사항

  ### 서버 측 (server.js)
  - `getClientIP()` 함수 개선
    * IPv6-mapped IPv4 주소 처리
    * 프록시 헤더(`x-forwarded-for`) 우선 처리
    * 다양한 소켓 속성에서 IP 추출 시도
    * 로컬 테스트 환경 IPv6 주소 변환

  - `createRoom` 핸들러 수정
    * IP 차단 옵션이 활성화된 경우 방 생성 전 IP/deviceId 체크
    * `io.fetchSockets()`로 모든 소켓 확인
    * 같은 IP/deviceId를 가진 사용자가 다른 방에 있으면 방 생성 차단

  - `joinRoom` 핸들러 수정
    * 모든 방에서 IP/deviceId 중복 체크 (같은 방뿐만 아니라)
    * `io.fetchSockets()`로 모든 소켓 확인
    * 같은 방/다른 방 구분하여 에러 메시지 제공

  - `getCurrentRoom` 핸들러 수정
    * IP 차단 옵션이 활성화된 경우 IP/deviceId 체크 추가
    * 같은 이름은 재연결로 간주하여 허용
    * 다른 이름으로 중복 접속 시 차단

  - 소켓 연결 시 IP 주소 로깅 추가

  ## 버그 수정
  - IP 추출이 제대로 되지 않던 문제 해결
  - 방 생성 시 IP 체크가 작동하지 않던 문제 해결
  - 방 입장 시 다른 방에서의 중복 체크가 작동하지 않던 문제 해결

## 수정된 파일
- server.js
- CHANGELOG.md
- COMMIT_MESSAGE.txt

---

feat: 대기실 통계 기능 추가 및 게임 자동 종료 개선

## 주요 변경사항

### 1. 대기실 통계 기능 추가
- 대기실 우상단에 오늘의 주사위 굴린 횟수와 평균값 표시
- 모든 방에서 진행된 공식전 기록을 집계하여 표시
- 공식전만 포함 (연습 제외)
- 방이 삭제되어도 기록 유지 (전역 저장소 사용)
- 주사위 범위가 100이 아닐 때 1~100 범위로 정규화하여 평균 계산

### 2. 게임 자동 종료 기능
- 모든 참여자가 주사위를 굴리면 자동으로 게임 종료
- 게임 종료 시 결과 팝업 제거 (게임 기록에서만 확인 가능)

## 기술적 변경사항

### 서버 측 (server.js)
- **오늘의 주사위 통계 계산 함수 추가**
  * `getTodayDiceStats()` 함수 추가
  * 전역 저장소(`todayDiceRecords`)와 현재 존재하는 방의 기록을 모두 집계
  * 공식전(`isGameActive === true`) 기록만 필터링
  * 주사위 범위 정규화 함수 `normalizeTo100()` 추가

- **전역 저장소 추가**
  * `todayDiceRecords` 배열 추가 (방이 삭제되어도 기록 유지)
  * 방 삭제 시 오늘 날짜의 공식전 기록을 전역 저장소에 저장
  * 중복 저장 방지 로직 추가

- **주사위 기록에 날짜 및 게임 상태 추가**
  * `date` 필드 추가 (YYYY-MM-DD 형식)
  * `isGameActive` 필드 추가 (게임 진행 중일 때 굴린 주사위인지 표시)

- **게임 시작 시 history 초기화 제거**
  * 게임 시작 시 `gameState.history = []` 제거
  * 누적 기록 유지로 통계 계산 가능

- **자동 게임 종료 기능**
  * 모든 참여자가 주사위를 굴렸을 때 자동으로 게임 종료
  * `allPlayersRolled` 이벤트 발생 시 게임 종료 처리

- **통계 조회 이벤트 추가**
  * `getTodayDiceStats` 이벤트 핸들러 추가
  * 주사위를 굴릴 때마다 통계 업데이트

### 클라이언트 측 (dice-game-multiplayer.html)
- **대기실 통계 표시 영역 추가**
  * 대기실 우상단에 통계 표시 영역 추가
  * 통계 요청 및 표시 함수 추가
  * 방 목록 새로고침 시 통계도 함께 업데이트

- **게임 시작 시 history 초기화 제거**
  * 게임 시작 시 `historyData = []` 제거
  * `renderHistory` 함수에서 게임 진행 중일 때 현재 게임의 기록만 필터링해서 표시

- **게임 종료 시 팝업 제거**
  * 게임 종료 시 결과를 보여주는 `alert` 팝업 제거
  * 결과는 게임 기록에서만 확인 가능

## 버그 수정
- 주사위를 1회 굴리면 카운트가 2씩 늘어나던 문제 해결 (중복 저장 제거)
- 방이 삭제되면 통계에서 기록이 사라지던 문제 해결 (전역 저장소 추가)

## 수정된 파일
- server.js
- dice-game-multiplayer.html
- CHANGELOG.md
- COMMIT_MESSAGE.txt
