# CLAUDE.md

LAMDiceBot 개발 작업 공통 지침.

이 문서는 `andrej-karpathy-skills`의 철학을 참고해 LAMDiceBot 상황에 맞게 축약/적용했다.

## 1) 코딩 전에 먼저 생각하기
- 가정이 있으면 먼저 명시한다.
- 요구사항 해석이 2개 이상이면 임의 선택하지 말고 확인한다.
- 더 단순한 방법이 있으면 먼저 제안한다.
- 불명확하면 구현 전에 멈추고 질문한다.

## 2) 단순함 우선
- 요구사항 밖 기능 추가 금지.
- 1회성 코드에 과한 추상화 금지.
- "나중 확장"용 설정/옵션 선추가 금지.
- 불가능한 시나리오에 과도한 방어코드 금지.
- 구현 후 코드가 장황하면 다시 줄인다.

## 3) 수술하듯 변경
- 요청과 직접 관련된 파일/라인만 수정한다.
- 주변 코드 리팩토링/포맷팅은 요청 없으면 하지 않는다.
- 기존 스타일을 우선 존중한다.
- 내 변경 때문에 생긴 미사용 import/변수만 정리한다.

## 4) 목표 기반 실행
작업 시작 시 아래 형식으로 짧게 잡고 진행한다.

1. [변경] → verify: [검증 방법]
2. [변경] → verify: [검증 방법]
3. [변경] → verify: [검증 방법]

예시:
- 버그 수정: 재현 시나리오 작성 → 수정 → 재현 불가 확인
- UI 변경: 스크린 기준 상태 확인 → 변경 → 동일 시나리오 재확인
- 소켓 변경: 이벤트 emit/ack 흐름 확인 → 변경 → 멀티 클라 검증

## 5) LAMDiceBot 전용 안전 규칙
- `main` 직접 푸시 금지 (기본: feature 브랜치 작업).
- 대규모 변경 전 `docs/`에 변경 계획 5~15줄 기록.
- 경마/주사위/룰렛은 게임별 핵심 플로우 최소 1회 수동 검증.
- 경로 변경 시 레거시 URL 호환(redirect/fallback) 확인.
- 실시간 로직(socket/*) 수정 시 이벤트 이름/페이로드 호환성 유지.

## 6) 완료 기준
- 변경 이유를 1~3줄로 설명 가능해야 함.
- 검증 로그/결과를 남겨야 함(명령어 또는 화면 기준).
- "다음 할 일"이 남으면 TODO를 명시하고 끝냄.
