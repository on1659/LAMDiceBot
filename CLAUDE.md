# CLAUDE.md

## Project: LAMDiceBot

Express + Socket.IO 기반 멀티플레이어 주사위/경마 게임 서버.
순수 HTML (템플릿 엔진 미사용), PostgreSQL DB, 상대 경로 API (`/api/...`).

## Git Workflow

- **main = 실서버** (푸시하면 바로 배포) → 푸시 전 반드시 사용자 확인
- **feature 브랜치 = 개발용** → 자유롭게 푸시 가능

---

## Coding Guidelines

### 1. Think Before Coding

- 가정을 명시적으로 밝힌다. 불확실하면 물어본다.
- 여러 해석이 가능하면 조용히 하나를 고르지 말고 제시한다.
- 더 간단한 방법이 있으면 말한다. 필요하면 반론을 제기한다.
- 뭔가 불분명하면 멈추고, 무엇이 헷갈리는지 말하고 물어본다.

### 2. Simplicity First

- 요청된 것 이상의 기능 추가 금지.
- 한 번만 쓰이는 코드에 추상화 금지.
- 요청하지 않은 "유연성"이나 "설정 가능성" 금지.
- 불가능한 시나리오에 대한 에러 핸들링 금지.
- 200줄을 50줄로 줄일 수 있으면 줄인다.

스스로 물어보기: "시니어 엔지니어가 이걸 보고 과하다고 할까?" 그렇다면 단순화.

### 3. Surgical Changes

기존 코드 수정 시:
- 주변 코드, 주석, 포매팅 "개선" 금지.
- 망가지지 않은 것을 리팩터링 금지.
- 기존 스타일에 맞춘다 (내 취향과 달라도).
- 관련 없는 데드 코드를 발견하면 삭제하지 말고 언급만.

내 변경으로 생긴 고아 코드:
- 내 변경이 만든 미사용 import/변수/함수는 제거.
- 기존에 있던 데드 코드는 요청 없으면 건드리지 않는다.

**테스트**: 변경된 모든 줄이 사용자의 요청에 직접 연결되어야 한다.

### 4. Goal-Driven Execution

작업을 검증 가능한 목표로 변환:
- "유효성 검사 추가" → "잘못된 입력에 대한 테스트 작성, 통과시키기"
- "버그 수정" → "재현 테스트 작성, 통과시키기"
- "X 리팩터링" → "전후 테스트 통과 확인"

다단계 작업은 간략한 계획 제시:
```
1. [단계] → 검증: [확인사항]
2. [단계] → 검증: [확인사항]
3. [단계] → 검증: [확인사항]
```

---

**이 가이드라인이 작동하는 증거:** diff에 불필요한 변경이 줄고, 과도한 복잡성으로 인한 재작성이 줄고, 실수 후가 아닌 구현 전에 질문이 나온다.
